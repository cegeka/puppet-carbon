## Managed by puppet
[Unit]
Description=Carbon-relay instance <%=@title%>

[Service]
Type=simple
LimitNOFILE=65535
TimeoutStopSec=20
PermissionsStartOnly=true
RuntimeDirectory=carbon
RuntimeDirectoryMode=755
PIDFile=/run/carbon/carbon-relay-<%=@title%>.pid
ExecStart=/opt/graphite/bin/carbon-relay.py \
        --config=/etc/carbon/carbon-relay.conf \
        --debug \
        --instance=<%=@title%> \
        --pidfile=/run/carbon/carbon-relay-<%=@title%>.pid \
        --logdir=<%=@log_dir%> start
ExecStop=/opt/graphite/bin/carbon-relay.py \
        --config=/etc/carbon/carbon-relay.conf \
        --debug \
        --instance=<%=@title%> \
        --pidfile=/run/carbon/carbon-relay-<%=@title%>.pid \
        --logdir=<%=@log_dir%> stop
User=<%=@user%>
Group=<%=@group%>
[Install]
WantedBy=multi-user.target
